## 浏览器渲染流程

- 网络进程获取html -> html交给渲染主线程，渲染主线程开始解析html，解析生成dom树和cssom树，
- 在解析到首先是预解析器线程快速浏览，浏览到link标签时会交给网络进程进行下载，下载完后交给预解析器解析升车cssom树，html解析到link标签时不会停止解析，
- 预解析器浏览到script标签时，会交给网络进程下载js文件，html解析到script标签时会停止解析，等到js下在执行完毕后继续解析生成dom树（防止js中的dom操作改变已经解析的dom）
- 然后dom树和cssom树进行样式计算，计算样式层叠和继承后的最终样式以及相对单位转换为绝对单位，得到所有节点都有最终样式的dom树，
- 然后对这个dom树进行布局解析计算每个元素的位置和大小生成布局树，
- 然后进行分层，将布局树分为上下分割的图层，
- 然后给每层绑定对应的paint指令集，到这里渲染主线程任务结束，之后的任务交个其他线程，
- 分层并绑定paint指令集之后交给合成线程，合成线程对其进行分快处理，
- 然后合成线程将信息交个GPU进程，GPU进程根据paint指令集对每个块进行光栅化处理将每个快变成位图（优先处理靠近视口的快）（此过程会用到GPU加速）
- 然后将位图信息交给合成线程，得到每个层以及每个块的位图信息生成指引quad信息
- 指引信息会标示出每个位图应该画到哪里，以及会考虑到旋转和缩放等变形
- 然后合成线程将quad信息交给GPU进程，GPU进程产生系统调用，提交给GPU硬件，最终完成屏幕成像
